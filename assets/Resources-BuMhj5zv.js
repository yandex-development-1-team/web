import{r as Ve,j as g,R as T,L as Et}from"./index-CWy5ZKgh.js";import{c as Lt,B as Ne}from"./Button-B2DytFO2.js";import{I as Xe}from"./Input-BOJoP5_S.js";const Ct=({title:e,titleId:t,...s})=>Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"none","aria-labelledby":t,...s},e?Ve.createElement("title",{id:t},e):null,Ve.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M9.01 22.99 16.002 16l6.991 6.99m0-13.98L16 16 9.01 9.01"}));function Nt({className:e,...t}){return g.jsx("textarea",{"data-slot":"textarea",className:Lt(`border-(--input-border) border rounded-lg outline-none bg-transparent
        flex field-sizing-content min-h-15 w-full py-3 ps-3 pe-2
        text-h5 text-text caret-(--caret)
        transition-colors duration-200 ease-in-out
        placeholder:transition-colors placeholder:duration-200 placeholder:text-(--placeholder) placeholder:text-small placeholder:italic
        hover:border-(--input-border-active) hover:placeholder:text-(--placeholder-active)
        focus-visible:border-(--input-border-active) focus:placeholder:opacity-0
        aria-invalid:border-system-error
        disabled:bg-grey-extra-light disabled:opacity-40 disabled:text-(--input-border) disabled:pointer-events-none disabled:cursor-not-allowed disabled:placeholder:opacity-0`,"hide-resizer",e),placeholder:t.placeholder?t.placeholder:"Место для текста",...t})}const U=[];for(let e=0;e<256;++e)U.push((e+256).toString(16).slice(1));function Rt(e,t=0){return(U[e[t+0]]+U[e[t+1]]+U[e[t+2]]+U[e[t+3]]+"-"+U[e[t+4]]+U[e[t+5]]+"-"+U[e[t+6]]+U[e[t+7]]+"-"+U[e[t+8]]+U[e[t+9]]+"-"+U[e[t+10]]+U[e[t+11]]+U[e[t+12]]+U[e[t+13]]+U[e[t+14]]+U[e[t+15]]).toLowerCase()}let Ee;const Ut=new Uint8Array(16);function Ot(){if(!Ee){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ee=crypto.getRandomValues.bind(crypto)}return Ee(Ut)}const It=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ze={randomUUID:It};function Tt(e,t,s){e=e||{};const a=e.random??e.rng?.()??Ot();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Rt(a)}function jt(e,t,s){return Ze.randomUUID&&!e?Ze.randomUUID():Tt(e)}const me=({title:e,children:t})=>g.jsxs("div",{className:"p-[20px] rounded-[8px] bg-system-background flex flex-col gap-[20px]",children:[g.jsx("h2",{className:"text-h2 text-black leading-[1.4]",children:e}),t]});var ge=e=>e.type==="checkbox",ie=e=>e instanceof Date,M=e=>e==null;const ct=e=>typeof e=="object";var E=e=>!M(e)&&!Array.isArray(e)&&ct(e)&&!ie(e),Mt=e=>E(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,Bt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Pt=(e,t)=>e.has(Bt(t)),qt=e=>{const t=e.constructor&&e.constructor.prototype;return E(t)&&t.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function R(e){if(e instanceof Date)return new Date(e);const t=typeof FileList<"u"&&e instanceof FileList;if(Oe&&(e instanceof Blob||t))return e;const s=Array.isArray(e);if(!s&&!(E(e)&&qt(e)))return e;const a=s?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=R(e[o]));return a}var Fe=e=>/^\w*$/.test(e),A=e=>e===void 0,Ie=e=>Array.isArray(e)?e.filter(Boolean):[],Te=e=>Ie(e.replace(/["|']|\]/g,"").split(/\.|\[/)),h=(e,t,s)=>{if(!t||!E(e))return s;const a=(Fe(t)?[t]:Te(t)).reduce((o,l)=>M(o)?o:o[l],e);return A(a)||a===e?A(e[t])?s:e[t]:a},J=e=>typeof e=="boolean",$=e=>typeof e=="function",k=(e,t,s)=>{let a=-1;const o=Fe(t)?[t]:Te(t),l=o.length,u=l-1;for(;++a<l;){const f=o[a];let D=s;if(a!==u){const F=e[f];D=E(F)||Array.isArray(F)?F:isNaN(+o[a+1])?{}:[]}if(f==="__proto__"||f==="constructor"||f==="prototype")return;e[f]=D,e=e[f]}};const Ge={BLUR:"blur",FOCUS_OUT:"focusout"},Y={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},G={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Wt=T.createContext(null);Wt.displayName="HookFormControlContext";var zt=(e,t,s,a=!0)=>{const o={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(o,l,{get:()=>{const u=l;return t._proxyFormState[u]!==Y.all&&(t._proxyFormState[u]=!a||Y.all),e[u]}});return o};const Ht=typeof window<"u"?T.useLayoutEffect:T.useEffect;var q=e=>typeof e=="string",$t=(e,t,s,a,o)=>q(e)?(a&&t.watch.add(e),h(s,e,o)):Array.isArray(e)?e.map(l=>(a&&t.watch.add(l),h(s,l))):(a&&(t.watchAll=!0),s),Re=e=>M(e)||!ct(e);function te(e,t,s=new WeakSet){if(Re(e)||Re(t))return Object.is(e,t);if(ie(e)&&ie(t))return Object.is(e.getTime(),t.getTime());const a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const l of a){const u=e[l];if(!o.includes(l))return!1;if(l!=="ref"){const f=t[l];if(ie(u)&&ie(f)||E(u)&&E(f)||Array.isArray(u)&&Array.isArray(f)?!te(u,f,s):!Object.is(u,f))return!1}}return!0}const Yt=T.createContext(null);Yt.displayName="HookFormContext";var Qt=(e,t,s,a,o)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[a]:o||!0}}:{},he=e=>Array.isArray(e)?e:[e],et=()=>{let e=[];return{get observers(){return e},next:o=>{for(const l of e)l.next&&l.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(l=>l!==o)}}),unsubscribe:()=>{e=[]}}};function ft(e,t){const s={};for(const a in e)if(e.hasOwnProperty(a)){const o=e[a],l=t[a];if(o&&E(o)&&l){const u=ft(o,l);E(u)&&(s[a]=u)}else e[a]&&(s[a]=l)}return s}var j=e=>E(e)&&!Object.keys(e).length,je=e=>e.type==="file",pe=e=>{if(!Oe)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},yt=e=>e.type==="select-multiple",Me=e=>e.type==="radio",Jt=e=>Me(e)||ge(e),Le=e=>pe(e)&&e.isConnected;function Kt(e,t){const s=t.slice(0,-1).length;let a=0;for(;a<s;)e=A(e)?a++:e[t[a++]];return e}function Xt(e){for(const t in e)if(e.hasOwnProperty(t)&&!A(e[t]))return!1;return!0}function S(e,t){const s=Array.isArray(t)?t:Fe(t)?[t]:Te(t),a=s.length===1?e:Kt(e,s),o=s.length-1,l=s[o];return a&&delete a[l],o!==0&&(E(a)&&j(a)||Array.isArray(a)&&Xt(a))&&S(e,s.slice(0,-1)),e}var Zt=e=>{for(const t in e)if($(e[t]))return!0;return!1};function ht(e){return Array.isArray(e)||E(e)&&!Zt(e)}function Ue(e,t={}){for(const s in e){const a=e[s];ht(a)?(t[s]=Array.isArray(a)?[]:{},Ue(a,t[s])):A(a)||(t[s]=!0)}return t}function ne(e,t,s){s||(s=Ue(t));for(const a in e){const o=e[a];if(ht(o))A(t)||Re(s[a])?s[a]=Ue(o,Array.isArray(o)?[]:{}):ne(o,M(t)?{}:t[a],s[a]);else{const l=t[a];s[a]=!te(o,l)}}return s}const tt={value:!1,isValid:!1},rt={value:!0,isValid:!0};var xt=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!A(e[0].attributes.value)?A(e[0].value)||e[0].value===""?rt:{value:e[0].value,isValid:!0}:rt:tt}return tt},gt=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:a})=>A(e)?e:t?e===""?NaN:e&&+e:s&&q(e)?new Date(e):a?a(e):e;const st={isValid:!1,value:null};var vt=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,st):st;function it(e){const t=e.ref;return je(t)?t.files:Me(t)?vt(e.refs).value:yt(t)?[...t.selectedOptions].map(({value:s})=>s):ge(t)?xt(e.refs).value:gt(A(t.value)?e.ref.value:t.value,e)}var Gt=(e,t,s,a)=>{const o={};for(const l of e){const u=h(t,l);u&&k(o,l,u._f)}return{criteriaMode:s,names:[...e],fields:o,shouldUseNativeValidation:a}},_e=e=>e instanceof RegExp,ye=e=>A(e)?e:_e(e)?e.source:E(e)?_e(e.value)?e.value.source:e.value:e,at=e=>({isOnSubmit:!e||e===Y.onSubmit,isOnBlur:e===Y.onBlur,isOnChange:e===Y.onChange,isOnAll:e===Y.all,isOnTouch:e===Y.onTouched});const lt="AsyncFunction";var er=e=>!!e&&!!e.validate&&!!($(e.validate)&&e.validate.constructor.name===lt||E(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lt)),tr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),nt=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const xe=(e,t,s,a)=>{for(const o of s||Object.keys(e)){const l=h(e,o);if(l){const{_f:u,...f}=l;if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],o)&&!a)return!0;if(u.ref&&t(u.ref,u.name)&&!a)return!0;if(xe(f,t))break}else if(E(f)&&xe(f,t))break}}};function ot(e,t,s){const a=h(e,s);if(a||Fe(s))return{error:a,name:s};const o=s.split(".");for(;o.length;){const l=o.join("."),u=h(t,l),f=h(e,l);if(u&&!Array.isArray(u)&&s!==l)return{name:s};if(f&&f.type)return{name:l,error:f};if(f&&f.root&&f.root.type)return{name:`${l}.root`,error:f.root};o.pop()}return{name:s}}var rr=(e,t,s,a)=>{s(e);const{name:o,...l}=e;return j(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(u=>t[u]===(!a||Y.all))},sr=(e,t,s)=>!e||!t||e===t||he(e).some(a=>a&&(s?a===t:a.startsWith(t)||t.startsWith(a))),ir=(e,t,s,a,o)=>o.isOnAll?!1:!s&&o.isOnTouch?!(t||e):(s?a.isOnBlur:o.isOnBlur)?!e:(s?a.isOnChange:o.isOnChange)?e:!0,ar=(e,t)=>!Ie(h(e,t)).length&&S(e,t),lr=(e,t,s)=>{const a=he(h(e,s));return k(a,"root",t[s]),k(e,s,a),e};function ut(e,t,s="validate"){if(q(e)||Array.isArray(e)&&e.every(q)||J(e)&&!e)return{type:s,message:q(e)?e:"",ref:t}}var le=e=>E(e)&&!_e(e)?e:{value:e,message:""},dt=async(e,t,s,a,o,l)=>{const{ref:u,refs:f,required:D,maxLength:F,minLength:oe,min:w,max:L,pattern:b,validate:K,name:B,valueAsNumber:Q,mount:W}=e._f,m=h(s,B);if(!W||t.has(B))return{};const X=f?f[0]:u,Z=v=>{o&&X.reportValidity&&(X.setCustomValidity(J(v)?"":v||""),X.reportValidity())},C={},ue=Me(u),ve=ge(u),re=ue||ve,ae=(Q||je(u))&&A(u.value)&&A(m)||pe(u)&&u.value===""||m===""||Array.isArray(m)&&!m.length,z=Qt.bind(null,B,a,C),be=(v,V,N,O=G.maxLength,H=G.minLength)=>{const P=v?V:N;C[B]={type:v?O:H,message:P,ref:u,...z(v?O:H,P)}};if(l?!Array.isArray(m)||!m.length:D&&(!re&&(ae||M(m))||J(m)&&!m||ve&&!xt(f).isValid||ue&&!vt(f).isValid)){const{value:v,message:V}=q(D)?{value:!!D,message:D}:le(D);if(v&&(C[B]={type:G.required,message:V,ref:X,...z(G.required,V)},!a))return Z(V),C}if(!ae&&(!M(w)||!M(L))){let v,V;const N=le(L),O=le(w);if(!M(m)&&!isNaN(m)){const H=u.valueAsNumber||m&&+m;M(N.value)||(v=H>N.value),M(O.value)||(V=H<O.value)}else{const H=u.valueAsDate||new Date(m),P=fe=>new Date(new Date().toDateString()+" "+fe),de=u.type=="time",ce=u.type=="week";q(N.value)&&m&&(v=de?P(m)>P(N.value):ce?m>N.value:H>new Date(N.value)),q(O.value)&&m&&(V=de?P(m)<P(O.value):ce?m<O.value:H<new Date(O.value))}if((v||V)&&(be(!!v,N.message,O.message,G.max,G.min),!a))return Z(C[B].message),C}if((F||oe)&&!ae&&(q(m)||l&&Array.isArray(m))){const v=le(F),V=le(oe),N=!M(v.value)&&m.length>+v.value,O=!M(V.value)&&m.length<+V.value;if((N||O)&&(be(N,v.message,V.message),!a))return Z(C[B].message),C}if(b&&!ae&&q(m)){const{value:v,message:V}=le(b);if(_e(v)&&!m.match(v)&&(C[B]={type:G.pattern,message:V,ref:u,...z(G.pattern,V)},!a))return Z(V),C}if(K){if($(K)){const v=await K(m,s),V=ut(v,X);if(V&&(C[B]={...V,...z(G.validate,V.message)},!a))return Z(V.message),C}else if(E(K)){let v={};for(const V in K){if(!j(v)&&!a)break;const N=ut(await K[V](m,s),X,V);N&&(v={...N,...z(V,N.message)},Z(N.message),a&&(C[B]=v))}if(!j(v)&&(C[B]={ref:X,...v},!a))return C}}return Z(!0),C};const nr={mode:Y.onSubmit,reValidateMode:Y.onChange,shouldFocusError:!0};function or(e={}){let t={...nr,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:$(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},o=E(t.defaultValues)||E(t.values)?R(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:R(o),u={action:!1,mount:!1,watch:!1,keepIsValid:!1},f={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},D,F=0;const oe={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w={...oe};let L={...w};const b={array:et(),state:et()},K=t.criteriaMode===Y.all,B=r=>i=>{clearTimeout(F),F=setTimeout(r,i)},Q=async r=>{if(!u.keepIsValid&&!t.disabled&&(w.isValid||L.isValid||r)){let i;t.resolver?(i=j((await re()).errors),W()):i=await z(a,!0),i!==s.isValid&&b.state.next({isValid:i})}},W=(r,i)=>{!t.disabled&&(w.isValidating||w.validatingFields||L.isValidating||L.validatingFields)&&((r||Array.from(f.mount)).forEach(n=>{n&&(i?k(s.validatingFields,n,i):S(s.validatingFields,n))}),b.state.next({validatingFields:s.validatingFields,isValidating:!j(s.validatingFields)}))},m=(r,i=[],n,y,c=!0,d=!0)=>{if(y&&n&&!t.disabled){if(u.action=!0,d&&Array.isArray(h(a,r))){const x=n(h(a,r),y.argA,y.argB);c&&k(a,r,x)}if(d&&Array.isArray(h(s.errors,r))){const x=n(h(s.errors,r),y.argA,y.argB);c&&k(s.errors,r,x),ar(s.errors,r)}if((w.touchedFields||L.touchedFields)&&d&&Array.isArray(h(s.touchedFields,r))){const x=n(h(s.touchedFields,r),y.argA,y.argB);c&&k(s.touchedFields,r,x)}(w.dirtyFields||L.dirtyFields)&&(s.dirtyFields=ne(o,l)),b.state.next({name:r,isDirty:v(r,i),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else k(l,r,i)},X=(r,i)=>{k(s.errors,r,i),b.state.next({errors:s.errors})},Z=r=>{s.errors=r,b.state.next({errors:s.errors,isValid:!1})},C=(r,i,n,y)=>{const c=h(a,r);if(c){const d=h(l,r,A(n)?h(o,r):n);A(d)||y&&y.defaultChecked||i?k(l,r,i?d:it(c._f)):O(r,d),u.mount&&!u.action&&Q()}},ue=(r,i,n,y,c)=>{let d=!1,x=!1;const p={name:r};if(!t.disabled){if(!n||y){(w.isDirty||L.isDirty)&&(x=s.isDirty,s.isDirty=p.isDirty=v(),d=x!==p.isDirty);const _=te(h(o,r),i);x=!!h(s.dirtyFields,r),_?S(s.dirtyFields,r):k(s.dirtyFields,r,!0),p.dirtyFields=s.dirtyFields,d=d||(w.dirtyFields||L.dirtyFields)&&x!==!_}if(n){const _=h(s.touchedFields,r);_||(k(s.touchedFields,r,n),p.touchedFields=s.touchedFields,d=d||(w.touchedFields||L.touchedFields)&&_!==n)}d&&c&&b.state.next(p)}return d?p:{}},ve=(r,i,n,y)=>{const c=h(s.errors,r),d=(w.isValid||L.isValid)&&J(i)&&s.isValid!==i;if(t.delayError&&n?(D=B(()=>X(r,n)),D(t.delayError)):(clearTimeout(F),D=null,n?k(s.errors,r,n):S(s.errors,r)),(n?!te(c,n):c)||!j(y)||d){const x={...y,...d&&J(i)?{isValid:i}:{},errors:s.errors,name:r};s={...s,...x},b.state.next(x)}},re=async r=>(W(r,!0),await t.resolver(l,t.context,Gt(r||f.mount,a,t.criteriaMode,t.shouldUseNativeValidation))),ae=async r=>{const{errors:i}=await re(r);if(W(r),r)for(const n of r){const y=h(i,n);y?k(s.errors,n,y):S(s.errors,n)}else s.errors=i;return i},z=async(r,i,n={valid:!0})=>{for(const y in r){const c=r[y];if(c){const{_f:d,...x}=c;if(d){const p=f.array.has(d.name),_=c._f&&er(c._f);_&&w.validatingFields&&W([d.name],!0);const I=await dt(c,f.disabled,l,K,t.shouldUseNativeValidation&&!i,p);if(_&&w.validatingFields&&W([d.name]),I[d.name]&&(n.valid=!1,i||e.shouldUseNativeValidation))break;!i&&(h(I,d.name)?p?lr(s.errors,I,d.name):k(s.errors,d.name,I[d.name]):S(s.errors,d.name))}!j(x)&&await z(x,i,n)}}return n.valid},be=()=>{for(const r of f.unMount){const i=h(a,r);i&&(i._f.refs?i._f.refs.every(n=>!Le(n)):!Le(i._f.ref))&&we(r)}f.unMount=new Set},v=(r,i)=>!t.disabled&&(r&&i&&k(l,r,i),!te(Be(),o)),V=(r,i,n)=>$t(r,f,{...u.mount?l:A(i)?o:q(r)?{[r]:i}:i},n,i),N=r=>Ie(h(u.mount?l:o,r,t.shouldUnregister?h(o,r,[]):[])),O=(r,i,n={})=>{const y=h(a,r);let c=i;if(y){const d=y._f;d&&(!d.disabled&&k(l,r,gt(i,d)),c=pe(d.ref)&&M(i)?"":i,yt(d.ref)?[...d.ref.options].forEach(x=>x.selected=c.includes(x.value)):d.refs?ge(d.ref)?d.refs.forEach(x=>{(!x.defaultChecked||!x.disabled)&&(Array.isArray(c)?x.checked=!!c.find(p=>p===x.value):x.checked=c===x.value||!!c)}):d.refs.forEach(x=>x.checked=x.value===c):je(d.ref)?d.ref.value="":(d.ref.value=c,d.ref.type||b.state.next({name:r,values:R(l)})))}(n.shouldDirty||n.shouldTouch)&&ue(r,c,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&fe(r)},H=(r,i,n)=>{for(const y in i){if(!i.hasOwnProperty(y))return;const c=i[y],d=r+"."+y,x=h(a,d);(f.array.has(r)||E(c)||x&&!x._f)&&!ie(c)?H(d,c,n):O(d,c,n)}},P=(r,i,n={})=>{const y=h(a,r),c=f.array.has(r),d=R(i);k(l,r,d),c?(b.array.next({name:r,values:R(l)}),(w.isDirty||w.dirtyFields||L.isDirty||L.dirtyFields)&&n.shouldDirty&&b.state.next({name:r,dirtyFields:ne(o,l),isDirty:v(r,d)})):y&&!y._f&&!M(d)?H(r,d,n):O(r,d,n),nt(r,f)?b.state.next({...s,name:r,values:R(l)}):b.state.next({name:u.mount?r:void 0,values:R(l)})},de=async r=>{u.mount=!0;const i=r.target;let n=i.name,y=!0;const c=h(a,n),d=_=>{y=Number.isNaN(_)||ie(_)&&isNaN(_.getTime())||te(_,h(l,n,_))},x=at(t.mode),p=at(t.reValidateMode);if(c){let _,I;const se=i.type?it(c._f):Mt(r),ee=r.type===Ge.BLUR||r.type===Ge.FOCUS_OUT,At=!tr(c._f)&&!t.resolver&&!h(s.errors,n)&&!c._f.deps||ir(ee,h(s.touchedFields,n),s.isSubmitted,p,x),De=nt(n,f,ee);k(l,n,se),ee?(!i||!i.readOnly)&&(c._f.onBlur&&c._f.onBlur(r),D&&D(0)):c._f.onChange&&c._f.onChange(r);const Se=ue(n,se,ee),Dt=!j(Se)||De;if(!ee&&b.state.next({name:n,type:r.type,values:R(l)}),At)return(w.isValid||L.isValid)&&(t.mode==="onBlur"?ee&&Q():ee||Q()),Dt&&b.state.next({name:n,...De?{}:Se});if(!ee&&De&&b.state.next({...s}),t.resolver){const{errors:Je}=await re([n]);if(W([n]),d(se),y){const St=ot(s.errors,a,n),Ke=ot(Je,a,St.name||n);_=Ke.error,n=Ke.name,I=j(Je)}}else W([n],!0),_=(await dt(c,f.disabled,l,K,t.shouldUseNativeValidation))[n],W([n]),d(se),y&&(_?I=!1:(w.isValid||L.isValid)&&(I=await z(a,!0)));y&&(c._f.deps&&(!Array.isArray(c._f.deps)||c._f.deps.length>0)&&fe(c._f.deps),ve(n,I,_,Se))}},ce=(r,i)=>{if(h(s.errors,i)&&r.focus)return r.focus(),1},fe=async(r,i={})=>{let n,y;const c=he(r);if(t.resolver){const d=await ae(A(r)?r:c);n=j(d),y=r?!c.some(x=>h(d,x)):n}else r?(y=(await Promise.all(c.map(async d=>{const x=h(a,d);return await z(x&&x._f?{[d]:x}:x)}))).every(Boolean),!(!y&&!s.isValid)&&Q()):y=n=await z(a);return b.state.next({...!q(r)||(w.isValid||L.isValid)&&n!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:n}:{},errors:s.errors}),i.shouldFocus&&!y&&xe(a,ce,r?c:f.mount),y},Be=(r,i)=>{let n={...u.mount?l:o};return i&&(n=ft(i.dirtyFields?s.dirtyFields:s.touchedFields,n)),A(r)?n:q(r)?h(n,r):r.map(y=>h(n,y))},Pe=(r,i)=>({invalid:!!h((i||s).errors,r),isDirty:!!h((i||s).dirtyFields,r),error:h((i||s).errors,r),isValidating:!!h(s.validatingFields,r),isTouched:!!h((i||s).touchedFields,r)}),mt=r=>{r&&he(r).forEach(i=>S(s.errors,i)),b.state.next({errors:r?s.errors:{}})},qe=(r,i,n)=>{const y=(h(a,r,{_f:{}})._f||{}).ref,c=h(s.errors,r)||{},{ref:d,message:x,type:p,..._}=c;k(s.errors,r,{..._,...i,ref:y}),b.state.next({name:r,errors:s.errors,isValid:!1}),n&&n.shouldFocus&&y&&y.focus&&y.focus()},Vt=(r,i)=>$(r)?b.state.subscribe({next:n=>"values"in n&&r(V(void 0,i),n)}):V(r,i,!0),We=r=>b.state.subscribe({next:i=>{sr(r.name,i.name,r.exact)&&rr(i,r.formState||w,kt,r.reRenderRoot)&&r.callback({values:{...l},...s,...i,defaultValues:o})}}).unsubscribe,pt=r=>(u.mount=!0,L={...L,...r.formState},We({...r,formState:{...oe,...r.formState}})),we=(r,i={})=>{for(const n of r?he(r):f.mount)f.mount.delete(n),f.array.delete(n),i.keepValue||(S(a,n),S(l,n)),!i.keepError&&S(s.errors,n),!i.keepDirty&&S(s.dirtyFields,n),!i.keepTouched&&S(s.touchedFields,n),!i.keepIsValidating&&S(s.validatingFields,n),!t.shouldUnregister&&!i.keepDefaultValue&&S(o,n);b.state.next({values:R(l)}),b.state.next({...s,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&Q()},ze=({disabled:r,name:i})=>{if(J(r)&&u.mount||r||f.disabled.has(i)){const c=f.disabled.has(i)!==!!r;r?f.disabled.add(i):f.disabled.delete(i),c&&u.mount&&!u.action&&Q()}},ke=(r,i={})=>{let n=h(a,r);const y=J(i.disabled)||J(t.disabled);return k(a,r,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:r}},name:r,mount:!0,...i}}),f.mount.add(r),n?ze({disabled:J(i.disabled)?i.disabled:t.disabled,name:r}):C(r,!0,i.value),{...y?{disabled:i.disabled||t.disabled}:{},...t.progressive?{required:!!i.required,min:ye(i.min),max:ye(i.max),minLength:ye(i.minLength),maxLength:ye(i.maxLength),pattern:ye(i.pattern)}:{},name:r,onChange:de,onBlur:de,ref:c=>{if(c){ke(r,i),n=h(a,r);const d=A(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,x=Jt(d),p=n._f.refs||[];if(x?p.find(_=>_===d):d===n._f.ref)return;k(a,r,{_f:{...n._f,...x?{refs:[...p.filter(Le),d,...Array.isArray(h(o,r))?[{}]:[]],ref:{type:d.type,name:r}}:{ref:d}}}),C(r,!1,void 0,d)}else n=h(a,r,{}),n._f&&(n._f.mount=!1),(t.shouldUnregister||i.shouldUnregister)&&!(Pt(f.array,r)&&u.action)&&f.unMount.add(r)}}},Ae=()=>t.shouldFocusError&&xe(a,ce,f.mount),_t=r=>{J(r)&&(b.state.next({disabled:r}),xe(a,(i,n)=>{const y=h(a,n);y&&(i.disabled=y._f.disabled||r,Array.isArray(y._f.refs)&&y._f.refs.forEach(c=>{c.disabled=y._f.disabled||r}))},0,!1))},He=(r,i)=>async n=>{let y;n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let c=R(l);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:d,values:x}=await re();W(),s.errors=d,c=R(x)}else await z(a);if(f.disabled.size)for(const d of f.disabled)S(c,d);if(S(s.errors,"root"),j(s.errors)){b.state.next({errors:{}});try{await r(c,n)}catch(d){y=d}}else i&&await i({...s.errors},n),Ae(),setTimeout(Ae);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(s.errors)&&!y,submitCount:s.submitCount+1,errors:s.errors}),y)throw y},Ft=(r,i={})=>{h(a,r)&&(A(i.defaultValue)?P(r,R(h(o,r))):(P(r,i.defaultValue),k(o,r,R(i.defaultValue))),i.keepTouched||S(s.touchedFields,r),i.keepDirty||(S(s.dirtyFields,r),s.isDirty=i.defaultValue?v(r,R(h(o,r))):v()),i.keepError||(S(s.errors,r),w.isValid&&Q()),b.state.next({...s}))},$e=(r,i={})=>{const n=r?R(r):o,y=R(n),c=j(r),d=c?o:y;if(i.keepDefaultValues||(o=n),!i.keepValues){if(i.keepDirtyValues){const x=new Set([...f.mount,...Object.keys(ne(o,l))]);for(const p of Array.from(x)){const _=h(s.dirtyFields,p),I=h(l,p),se=h(d,p);_&&!A(I)?k(d,p,I):!_&&!A(se)&&P(p,se)}}else{if(Oe&&A(r))for(const x of f.mount){const p=h(a,x);if(p&&p._f){const _=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(pe(_)){const I=_.closest("form");if(I){I.reset();break}}}}if(i.keepFieldsRef)for(const x of f.mount)P(x,h(d,x));else a={}}l=t.shouldUnregister?i.keepDefaultValues?R(o):{}:R(d),b.array.next({values:{...d}}),b.state.next({values:{...d}})}f={mount:i.keepDirtyValues?f.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!w.isValid||!!i.keepIsValid||!!i.keepDirtyValues||!t.shouldUnregister&&!j(d),u.watch=!!t.shouldUnregister,u.keepIsValid=!!i.keepIsValid,u.action=!1,i.keepErrors||(s.errors={}),b.state.next({submitCount:i.keepSubmitCount?s.submitCount:0,isDirty:c?!1:i.keepDirty?s.isDirty:!!(i.keepDefaultValues&&!te(r,o)),isSubmitted:i.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:c?{}:i.keepDirtyValues?i.keepDefaultValues&&l?ne(o,l):s.dirtyFields:i.keepDefaultValues&&r?ne(o,r):i.keepDirty?s.dirtyFields:{},touchedFields:i.keepTouched?s.touchedFields:{},errors:i.keepErrors?s.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Ye=(r,i)=>$e($(r)?r(l):r,{...t.resetOptions,...i}),wt=(r,i={})=>{const n=h(a,r),y=n&&n._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&setTimeout(()=>{c.focus(),i.shouldSelect&&$(c.select)&&c.select()})}},kt=r=>{s={...s,...r}},Qe={control:{register:ke,unregister:we,getFieldState:Pe,handleSubmit:He,setError:qe,_subscribe:We,_runSchema:re,_updateIsValidating:W,_focusError:Ae,_getWatch:V,_getDirty:v,_setValid:Q,_setFieldArray:m,_setDisabledField:ze,_setErrors:Z,_getFieldArray:N,_reset:$e,_resetDefaultValues:()=>$(t.defaultValues)&&t.defaultValues().then(r=>{Ye(r,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:be,_disableForm:_t,_subjects:b,_proxyFormState:w,get _fields(){return a},get _formValues(){return l},get _state(){return u},set _state(r){u=r},get _defaultValues(){return o},get _names(){return f},set _names(r){f=r},get _formState(){return s},get _options(){return t},set _options(r){t={...t,...r}}},subscribe:pt,trigger:fe,register:ke,handleSubmit:He,watch:Vt,setValue:P,getValues:Be,reset:Ye,resetField:Ft,clearErrors:mt,unregister:we,setError:qe,setFocus:wt,getFieldState:Pe};return{...Qe,formControl:Qe}}function bt(e={}){const t=T.useRef(void 0),s=T.useRef(void 0),[a,o]=T.useState({isDirty:!1,isValidating:!1,isLoading:$(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!$(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...f}=or(e);t.current={...f,formState:a}}const l=t.current.control;return l._options=e,Ht(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(f=>({...f,isReady:!0})),l._formState.isReady=!0,u},[l]),T.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),T.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),T.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),T.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),T.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==a.isDirty&&l._subjects.state.next({isDirty:u})}},[l,a.isDirty]),T.useEffect(()=>{var u;e.values&&!te(e.values,s.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),!((u=l._options.resetOptions)===null||u===void 0)&&u.keepIsValid||l._setValid(),s.current=e.values,o(f=>({...f}))):l._resetDefaultValues()},[l,e.values]),T.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),t.current.formState=T.useMemo(()=>zt(a,l),[l,a]),t.current}const ur=({defaultValue:e="",onSaveInfo:t,onDeleteInfo:s})=>{const{register:a,handleSubmit:o,reset:l}=bt({defaultValues:{info:e}}),u=()=>{s(),l({info:""})};return g.jsxs("form",{onSubmit:o(t),className:"flex flex-col gap-[20px]",children:[g.jsxs("label",{className:"flex flex-col gap-[3px]",children:[g.jsx("span",{className:"text-xxs text-text-grey-dark",children:"Текст"}),g.jsx(Nt,{placeholder:"Введите текст...",...a("info"),className:"max-h-[244px]",style:{resize:"none",overflowWrap:"anywhere",wordBreak:"break-word",overflowY:"auto"}})]}),g.jsxs("div",{className:"flex gap-[12px] self-end",children:[g.jsx(Ne,{type:"button",onClick:u,label:"Удалить",variant:"secondary",size:"default",className:"w-[196px]"}),g.jsx(Ne,{type:"submit",label:"Сохранить",size:"default",className:"w-[196px]"})]})]})},Ce=({links:e,onAddLink:t,onRemoveLink:s})=>{const{register:a,handleSubmit:o,reset:l,formState:{errors:u},clearErrors:f}=bt(),D=F=>{t(F),l()};return g.jsxs(g.Fragment,{children:[g.jsxs("form",{onSubmit:o(D),onBlur:F=>{F.currentTarget.contains(F.relatedTarget)||f()},noValidate:!0,className:"flex gap-[20px]",children:[g.jsxs("div",{className:"flex flex-col gap-[20px] grow",children:[g.jsxs("label",{className:"flex flex-col gap-[3px]",children:[g.jsx("span",{className:"text-xxs text-text-grey-dark",children:"Название"}),g.jsx(Xe,{type:"text",variant:"text",placeholder:"Введите название","aria-invalid":!!u.title,...a("title",{required:"Введите название",minLength:{value:2,message:"Название должно содержать минимум 2 символа"},onChange:()=>{u.title&&f("title")}})}),g.jsx("span",{className:"text-xxs text-text-error min-h-[16px]",children:u.title?.message||" "})]}),g.jsxs("label",{className:"flex flex-col gap-[3px]",children:[g.jsx("span",{className:"text-xxs text-text-grey-dark",children:"URL"}),g.jsx(Xe,{type:"url",variant:"text",placeholder:"Вставьте ссылку","aria-invalid":!!u.url,...a("url",{required:"Введите URL",pattern:{value:/^https?:\/\/.+\..+/i,message:"Введите корректный URL (например, https://example.com)"},onChange:()=>{u.url&&f("url")}})}),g.jsx("span",{className:"text-xxs text-text-error min-h-[16px]",children:u.url?.message||" "})]})]}),g.jsx(Ne,{type:"submit",label:"Загрузить",size:"default",className:"self-end w-[196px] mb-[19px]"})]}),e.length>0&&g.jsx("div",{className:"flex gap-[20px] flex-wrap",children:e.map(F=>g.jsxs("div",{className:"flex gap-[21px] pl-[12px] pt-[10px] pb-[8px]",children:[g.jsx(Et,{to:F.url,target:"_blank",rel:"noopener noreferrer",className:`text-button text-text pb-[2px] border-b 
                  border-yellow-accent-light 
                  hover:border-yellow-accent-dark
                  active:border-yellow-accent-dark active:border-b-[2px]`,children:F.title}),g.jsx("button",{type:"button",onClick:()=>s(F.id),"aria-label":"Удалить ссылку",className:"w-[24px] h-[24px] cursor-pointer",children:g.jsx(Ct,{className:"w-full h-full text-text"})})]},F.id))})]})},dr=()=>{const[e,t]=Ve.useState({organizationInfo:"",usefulLinks:[],faq:[],eventSchedule:[]}),s=u=>{t(f=>({...f,organizationInfo:u.info}))},a=()=>{t(u=>({...u,organizationInfo:""}))},o=u=>f=>{const D={...f,id:jt()};t(F=>({...F,[u]:[...F[u],D]}))},l=u=>f=>{t(D=>({...D,[u]:D[u].filter(F=>F.id!==f)}))};return g.jsxs("div",{className:"flex flex-col gap-[20px]",children:[g.jsx(me,{title:"Информация об организации",children:g.jsx(ur,{defaultValue:e.organizationInfo,onSaveInfo:s,onDeleteInfo:a})}),g.jsx(me,{title:"Полезные ссылки",children:g.jsx(Ce,{links:e.usefulLinks,onAddLink:o("usefulLinks"),onRemoveLink:l("usefulLinks")})}),g.jsx(me,{title:"FAQ",children:g.jsx(Ce,{links:e.faq,onAddLink:o("faq"),onRemoveLink:l("faq")})}),g.jsx(me,{title:"Афиша Partner Relations",children:g.jsx(Ce,{links:e.eventSchedule,onAddLink:o("eventSchedule"),onRemoveLink:l("eventSchedule")})})]})},xr=dr;export{xr as Component};
